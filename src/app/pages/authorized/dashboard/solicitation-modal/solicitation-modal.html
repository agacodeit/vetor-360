<div class="solicitation-modal">
    <div class="solicitation-modal__overlay" (click)="handleClose()"></div>

    <div class="solicitation-modal__container">
        <main class="solicitation-modal__content">

            <!-- Stepper -->
            <div class="solicitation-modal__stepper">
                <ds-stepper [steps]="stepperSteps" [currentStep]="currentStep" variant="default" size="md"
                    [showConnector]="true" [clickable]="false" (stepChanged)="onStepChanged($event)">
                </ds-stepper>
            </div>

            <!-- Conteúdo dos Steps -->
            <div class="solicitation-modal__step-content">

                <!-- Step 1: Informações Básicas -->
                <app-basic-info-step *ngIf="currentStep === 0" [formData]="basicInfoData"
                    (formDataChange)="onBasicInfoDataChange($event)" (formValid)="onBasicInfoValidChange($event)">
                </app-basic-info-step>

                <!-- Step 2: Garantias -->
                <app-guarantees-step *ngIf="currentStep === 1" [formData]="guaranteesData"
                    (formDataChange)="onGuaranteesDataChange($event)" (formValid)="onGuaranteesValidChange($event)">
                </app-guarantees-step>

                <!-- Step 3: Documentos -->
                <app-documents-step *ngIf="currentStep === 2" [formData]="documentsData"
                    (formDataChange)="onDocumentsDataChange($event)" (formValid)="onDocumentsValidChange($event)">
                </app-documents-step>

            </div>

            <!-- Ações do Modal -->
            <div class="solicitation-modal__actions">

                <!-- Botão Cancelar -->
                <ds-button label="Cancelar" type="button" variant="outline" (onClickEmitter)="handleClose()"
                    [fullWidth]="true" [rounded]="true" [disabled]="isLoading">
                </ds-button>

                <!-- Botão Voltar -->
                <ds-button *ngIf="canGoPrevious()" label="Voltar" type="button" variant="outline"
                    (onClickEmitter)="goToPreviousStep()" [fullWidth]="true" [rounded]="true" [disabled]="isLoading">
                </ds-button>

                <!-- Botão Próximo -->
                <ds-button *ngIf="currentStep < 2" label="Próximo" type="button" variant="fill"
                    (onClickEmitter)="goToNextStep()" [fullWidth]="true" [rounded]="true"
                    [disabled]="!canGoNext() || isLoading">
                </ds-button>

                <!-- Botão Finalizar -->
                <ds-button *ngIf="currentStep === 2" label="Criar Solicitação" type="button" variant="fill"
                    icon="fa-solid fa-plus" iconPosition="left" (onClickEmitter)="handleSubmit()" [fullWidth]="true"
                    [rounded]="true" [isLoading]="isLoading" [disabled]="!canFinish() || isLoading">
                </ds-button>

            </div>

        </main>
    </div>
</div>